{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    scaleImageToRatio: true,\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250\n});\n\n\nlet totalHits = 0;\nexport async function displayImages(images) {\n\n\n    images.forEach(image => {\n        const cardHTML = `\n            <div class=\"card\">\n                <a href=\"${image.webformatURL}\">\n                    <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n                </a>\n                <p>Likes: ${image.likes}</p>\n                <p>Views: ${image.views}</p>\n                <p>Comments: ${image.comments}</p>\n                <p>Downloads: ${image.downloads}</p>\n            </div>\n        `;\n\n        gallery.insertAdjacentHTML('beforeend', cardHTML);\n\n       \n    });\n    totalHits = images[0].totalHits || 0;\n    lightbox.refresh();\n   \n}\n\n","// import { PixabayAPI } from './js/pixabay-api';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { displayImages } from './js/render-functions';\nimport axios from 'axios';\nconst loader = document.getElementById('loader');\nconst gallery = document.querySelector('.gallery');\nlet currentPage = 1;\nlet searchTerm = '';\n\ndocument.getElementById('searchForm').addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const searchInput = document.getElementById('searchInput');\n\n    if (searchInput) {\n        currentPage = 1;\n        searchTerm = searchInput.value.trim();\n        gallery.innerHTML = '';\n        await fetchImages(searchTerm);\n    }\n});\n\nasync function fetchImages(query) {\n    try {\n        showLoader(); \n        const response = await axios.get(`https://pixabay.com/api/?key=28194821-49041d995ecd04735d9e20d11&q=${query}&page=${currentPage}&per_page=15`);\n        hideLoader(); \n\n        const images = response.data.hits;\n        const totalHits = response.data.totalHits;\n\n        if (images.length === 0) {\n            \n            displayNoResultsMessage();\n            return;\n        }\n\n        displayImages(images);\n         if (images.length === 0) {\n            iziToast.show({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                color: 'red',\n            });\n            return;\n        }\n        showLoadMoreButton();\n        checkIfEndOfResults(totalHits);\n\n    } catch (error) {\n        hideLoader(); \n        handleError(error);\n    }\n}\n\nfunction showLoader() {\n    loader.style.display = 'block';\n}\n\nfunction hideLoader() {\n    loader.style.display = 'none';\n}\n\nfunction displayNoResultsMessage() {\n    iziToast.info({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'bottomCenter',\n        color: 'red',\n    });\n}\n\nfunction showLoadMoreButton() {\n    loadMoreBtn.style.display = gallery.childElementCount > 0 ? 'block' : 'none';\n}\n\nfunction hideLoadMoreButton() {\n    loadMoreBtn.style.display = 'none';\n}\nfunction checkIfEndOfResults(totalHits) {\n    const remainingResults = totalHits - currentPage * 15;\n    if (remainingResults <= 0) {\n        hideLoadMoreButton();\n        displayEndOfResultsMessage();\n    }\n}\n\nfunction displayEndOfResultsMessage() {\n    iziToast.show({\n        title: 'End of Results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'bottomCenter',\n        color: 'blue',\n    });\n}\n\nasync function smoothScroll(distance) {\n    return new Promise((resolve) => {\n        window.scrollBy({\n            top: distance,\n            behavior: 'smooth',\n          \n        });\n\n        window.addEventListener('scroll', function scrollHandler() {\n           \n            window.removeEventListener('scroll', scrollHandler);\n            resolve();\n        });\n    });\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n    currentPage++;\n    await fetchImages(searchTerm);\n    await smoothScrollToNextGroup();\n});\n\nasync function smoothScrollToNextGroup() {\n    const cardHeight = document.querySelector('.gallery .card').getBoundingClientRect().height;\n    await smoothScroll(window.scrollY + cardHeight);\n}\n"],"names":["lightbox","SimpleLightbox","displayImages","images","image","cardHTML","loader","gallery","currentPage","searchTerm","e","searchInput","fetchImages","query","showLoader","response","axios","hideLoader","totalHits","displayNoResultsMessage","iziToast","showLoadMoreButton","checkIfEndOfResults","error","hideLoadMoreButton","displayEndOfResultsMessage","smoothScroll","distance","resolve","scrollHandler","smoothScrollToNextGroup","cardHeight"],"mappings":"owBAGA,MAAMA,EAAW,IAAIC,EAAe,aAAc,CAC9C,kBAAmB,GACnB,aAAc,MACd,gBAAiB,SACjB,aAAc,GAClB,CAAC,EAIM,eAAeC,EAAcC,EAAQ,CAGxCA,EAAO,QAAQC,GAAS,CACpB,MAAMC,EAAW;AAAA;AAAA,2BAEED,EAAM,YAAY;AAAA,gCACbA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,4BAE1CA,EAAM,KAAK;AAAA,4BACXA,EAAM,KAAK;AAAA,+BACRA,EAAM,QAAQ;AAAA,gCACbA,EAAM,SAAS;AAAA;AAAA,UAIvC,QAAQ,mBAAmB,YAAaC,CAAQ,CAGxD,CAAK,EACWF,EAAO,CAAC,EAAE,UACtBH,EAAS,QAAO,CAEpB,CC9BA,MAAMM,EAAS,SAAS,eAAe,QAAQ,EACzCC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAc,EACdC,EAAa,GAEjB,SAAS,eAAe,YAAY,EAAE,iBAAiB,SAAU,MAAOC,GAAM,CAC1EA,EAAE,eAAc,EAChB,MAAMC,EAAc,SAAS,eAAe,aAAa,EAErDA,IACAH,EAAc,EACdC,EAAaE,EAAY,MAAM,OAC/BJ,EAAQ,UAAY,GACpB,MAAMK,EAAYH,CAAU,EAEpC,CAAC,EAED,eAAeG,EAAYC,EAAO,CAC9B,GAAI,CACAC,IACA,MAAMC,EAAW,MAAMC,EAAM,IAAI,qEAAqEH,CAAK,SAASL,CAAW,cAAc,EAC7IS,IAEA,MAAMd,EAASY,EAAS,KAAK,KACvBG,EAAYH,EAAS,KAAK,UAEhC,GAAIZ,EAAO,SAAW,EAAG,CAErBgB,IACA,MACH,CAGA,GADDjB,EAAcC,CAAM,EACfA,EAAO,SAAW,EAAG,CACtBiB,EAAS,KAAK,CACV,MAAO,QACP,QAAS,2EACT,MAAO,KACvB,CAAa,EACD,MACH,CACDC,IACAC,EAAoBJ,CAAS,CAEhC,OAAQK,EAAO,CACZN,IACA,YAAYM,CAAK,CACpB,CACL,CAEA,SAAST,GAAa,CAClBR,EAAO,MAAM,QAAU,OAC3B,CAEA,SAASW,GAAa,CAClBX,EAAO,MAAM,QAAU,MAC3B,CAEA,SAASa,GAA0B,CAC/BC,EAAS,KAAK,CACV,MAAO,QACP,QAAS,2EACT,SAAU,eACV,MAAO,KACf,CAAK,CACL,CAEA,SAASC,GAAqB,CAC1B,YAAY,MAAM,QAAUd,EAAQ,kBAAoB,EAAI,QAAU,MAC1E,CAEA,SAASiB,GAAqB,CAC1B,YAAY,MAAM,QAAU,MAChC,CACA,SAASF,EAAoBJ,EAAW,CACXA,EAAYV,EAAc,IAC3B,IACpBgB,IACAC,IAER,CAEA,SAASA,GAA6B,CAClCL,EAAS,KAAK,CACV,MAAO,iBACP,QAAS,6DACT,SAAU,eACV,MAAO,MACf,CAAK,CACL,CAEA,eAAeM,EAAaC,EAAU,CAClC,OAAO,IAAI,QAASC,GAAY,CAC5B,OAAO,SAAS,CACZ,IAAKD,EACL,SAAU,QAEtB,CAAS,EAED,OAAO,iBAAiB,SAAU,SAASE,GAAgB,CAEvD,OAAO,oBAAoB,SAAUA,CAAa,EAClDD,GACZ,CAAS,CACT,CAAK,CACL,CAEA,YAAY,iBAAiB,QAAS,SAAY,CAC9CpB,IACA,MAAMI,EAAYH,CAAU,EAC5B,MAAMqB,EAAuB,CACjC,CAAC,EAED,eAAeA,GAA0B,CACrC,MAAMC,EAAa,SAAS,cAAc,gBAAgB,EAAE,sBAAuB,EAAC,OACpF,MAAML,EAAa,OAAO,QAAUK,CAAU,CAClD"}